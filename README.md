# grpc-microservices-proto
Proto files for gRPC microservices example project.

This repository contains gRPC API definitions with Protocol Buffers and the generated source code.

The generated source codes are used in the microservices as external dependencies in this example project: https://github.com/hollowdll/go-grpc-microservices

# Generate source codes

Source codes from the proto files can be generated by running the `compile_protos.sh` script. You need to have `protoc` Protobuf compiler installed to do so. Installation instructions [here](https://github.com/protocolbuffers/protobuf#protobuf-compiler-installation).

If you run the script again and the proto files have not changed, it does not generate anything. New source code is only generated if the proto file has changed.

This project showcases a manual way to managing proto files. However, the process could also be automated with a CI/CD pipeline, where the codes are generated and tagged/versioned every time a change to the proto files is pushed to the repository. This would require sligthly more advanced setup and script. It might be useful in real world scenarios such as:
- There are a lot of microservices
- Some microservices' code generation process is different than others
- The codes need to be generated for many different languages
- The generated codes need to be pushed to different package registries so they can be consumed as external dependencies

# Tagging versions

The generated source codes can be versioned with Git tags. Golang uses this for dependency management so you can import a specific version of the generated source code as an external dependency in another Go project.

For example
```sh
git tag -a gen/golang/paymentpb/v1.0.0 -m "gen/golang/paymentpb/v1.0.0"
git push --tags
```
This tags the generated source code of payment service as v1.0.0 and pushes it to the remote repository. Now you can import the generated code of payment gRPC API definition v1.0.0 in your microservices.

For example
```sh
go get -u github.com/<YOUR GITHUB USERNAME>/<YOUR REPO>/gen/golang/paymentpb@v1.0.0
```
